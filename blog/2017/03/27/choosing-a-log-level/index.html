<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="/theme/css/normalize.css" rel="stylesheet">
        <link href="/theme/css/skeleton.css" rel="stylesheet">
        <link href="/theme/css/statocles-default.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <title>Choosing a Log Level - preaction</title>
        <meta content="Statocles 0.083" name="generator">
        <link href="http://blogs.perl.org/users/preaction/2017/03/choosing-a-log-level.html" rel="canonical">
        
    </head>
    <body>
        <header>
            <nav class="navbar">
                <div class="container">
                    <a class="brand" href="/">preaction</a>
                    <ul>
                        <li>
                            <a href="/index.html">Blog</a>
                        </li>
                        <li>
                            <a href="/resume">Resume</a>
                        </li>
                        <li>
                            <a href="/talks">Talks</a>
                        </li>
                        <li>
                            <a href="/statocles">Statocles</a>
                        </li>
                        <li>
                            <a href="/yertl">Yertl</a>
                        </li>
                        <li>
                            <a href="http://indiepalate.com">Food</a>
                        </li>
                    </ul>
                    
                </div>
            </nav>
            
        </header>
        <div class="main container">
            <div class="row">

    <div class="nine columns">
        <main>
            <header>
                <h1>Choosing a Log Level</h1>
                <p class="tags">Tags:
                    <a href="/blog/tag/logging/" rel="tag">logging</a>
                </p>

                <aside>
                    <p><time datetime="2017-03-27">
                        Posted on 2017-03-27
                    </time>
                    </p>
                </aside>


            </header>
            <section id="section-1">
                <p>Like all subjective decisions in technology, which log level to use is
the cause of much angry debate. Worse, different logging systems use
different levels: <a href="https://en.wikipedia.org/wiki/Log4j#Log4j_log_levels">Log4j has 6 severity
levels</a>, and
<a href="https://en.wikipedia.org/wiki/Syslog#Severity_level">Syslog has 8 severity
levels</a>. While both
lists of log levels come with guidance as to which level to use when,
there&#39;s still enough ambiguity to cause confusion.</p>

<p>When choosing a log level, it&#39;s important to know how visible you want
the message to be, how big of a problem it is, and what you want the
user to do about it. With that in mind, this is the decision tree
I follow when choosing a log level:</p>

            </section>
            <section id="section-2">
                <ol>
<li>Can you continue execution after this? If no, use the <code>error</code> log
level. Log4j uses the <code>FATAL</code> log level for this, but I find the
degree of difference between &quot;fatal&quot; and &quot;error&quot; to be too small to
be useful.</li>
<li>Is this a problem the user needs to know about? If yes, use the
<code>warn</code> log level. It&#39;s important to think about what the user needs
to know. The more that falls into this category, the less the user
will actually see. This is called &quot;alert blindness&quot;: The user gets
conditioned to ignore output from the machine, which can cause real
problems to go unnoticed.</li>
<li>Does this contain technical details or data structures? If no, you
can use the <code>info</code> log level. This log level should be written for
the non-technical end-user to give high-level descriptions of the
current phase of execution (or, it should say, plainly and simply,
what&#39;s happening right now). The <code>info</code> log level can provide some
extra context to the errors and warnings, but it should not provide
technical details only useful to a programmer.</li>
<li>Otherwise, use the <code>debug</code> log level. The debug log level should be
the information used by the developer to diagnose and fix the
problems revealed by the errors and warnings. A non-technical user
should find little to no useful information at the debug level.</li>
</ol>

<p>And that&#39;s it! I only use 4 log levels. Of the 2 remaining log4j levels,
<code>fatal</code> isn&#39;t distinct enough from <code>error</code> to my taste, and <code>trace</code> is
meant for pedantic messages describing entering/leaving every subroutine
(which I refuse to write myself, and haven&#39;t used any tool to
auto-generate).</p>

<p>With these rules for which messages are logged at what level, I can
easily decide what logs should be displayed.</p>

<ul>
<li>The <code>debug</code> level (and all higher levels) are always logged via Syslog
(no matter what level is being shown on the terminal) and, from there,
propagated to long-term log storage in files or databases.</li>
<li>The terminal gets, by default, the <code>warn</code> log level, but a user can
pass in flags to change what they see. These command-line flags are
easy to achieve with <a href="http://metacpan.org/pod/Getopt::Long">the Getopt::Long Perl
module</a>.
<ul>
<li><code>-q</code> is &quot;quiet&quot; mode, and shows only the <code>error</code> log level</li>
<li><code>-v</code> is &quot;verbose&quot; mode, and shows the <code>info</code> log level</li>
<li><code>-vv</code> is &quot;debug&quot; mode, and shows the <code>debug</code> log level</li>
</ul></li>
</ul>

<p>These rules result in very sparse program output: If a program is
working perfectly, it will output nothing at all, which is a common
convention in Unix programs.</p>

<p>What to log to the terminal by default is another point of contention:
A lot of people expect a program to be verbose about what it is doing,
and that if a program doesn&#39;t say it did what you asked it to do, you
have to double-check. I disagree, but if it becomes a problem, I just
make <code>info</code> the default level (never <code>debug</code>, as <code>debug</code> is too much).</p>

<p>However your project decides to organize its logs,
<a href="http://metacpan.org/pod/Log::Any">Log::Any</a> can accommodate. To provide
interoperability between Syslog, Log4j (Log4perl), and other logging
systems, Log::Any supports all the severity levels from each system.</p>

<p>Remember that logging is meant to serve a variety of users, including
the end-user, and you as the developer. It can be difficult to serve
both, so some care needs to be taken when choosing what to display, and
like all other subjective things, consistency is key.</p>

            </section>
        </main>

        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'preaction';
            var disqus_identifier = '/2017/03/27/choosing-a-log-level/index.markdown';
            var disqus_url = 'http://preaction.me/blog/2017/03/27/choosing-a-log-level/';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

    </div>

    <div class="three columns sidebar">
        
<img alt="avatar" src="/images/avatar-small.jpg" title="Do You Believe In Magic? by Fusspot">

<h1>Doug Bell</h1>

<ul class="bare">
    <li><a href="https://github.com/preaction">
        <i class="fa fa-github-alt"></i> Github: preaction
    </a></li>
    <li><a href="https://twitter.com/preaction">
        <i class="fa fa-twitter"></i>Twitter: preaction
    </a></li>
    <li><a href="https://metacpan.org/author/PREACTION">CPAN: preaction</a></li>
</ul>

        <nav id="tags">
            <h1>Tags</h1>
            <ul class="list-inline">
                <li><a href="/blog/tag/beam/">beam</a></li>
                <li><a href="/blog/tag/blacklivesmatter/">blacklivesmatter</a></li>
                <li><a href="/blog/tag/chicago-pm/">chicago.pm</a></li>
                <li><a href="/blog/tag/community/">community</a></li>
                <li><a href="/blog/tag/cpan/">cpan</a></li>
                <li><a href="/blog/tag/cpantesters/">cpantesters</a></li>
                <li><a href="/blog/tag/error/">error</a></li>
                <li><a href="/blog/tag/etl/">etl</a></li>
                <li><a href="/blog/tag/funny/">funny</a></li>
                <li><a href="/blog/tag/git/">git</a></li>
                <li><a href="/blog/tag/history/">history</a></li>
                <li><a href="/blog/tag/javascript/">javascript</a></li>
                <li><a href="/blog/tag/logging/">logging</a></li>
                <li><a href="/blog/tag/mojolicious/">mojolicious</a></li>
                <li><a href="/blog/tag/moose/">moose</a></li>
                <li><a href="/blog/tag/mysql/">mysql</a></li>
                <li><a href="/blog/tag/openbsd/">openbsd</a></li>
                <li><a href="/blog/tag/perl/">perl</a></li>
                <li><a href="/blog/tag/personal/">personal</a></li>
                <li><a href="/blog/tag/progress/">progress</a></li>
                <li><a href="/blog/tag/racism/">racism</a></li>
                <li><a href="/blog/tag/rants/">rants</a></li>
                <li><a href="/blog/tag/scripts/">scripts</a></li>
                <li><a href="/blog/tag/software/">software</a></li>
                <li><a href="/blog/tag/sql/">sql</a></li>
                <li><a href="/blog/tag/statocles/">statocles</a></li>
                <li><a href="/blog/tag/travel/">travel</a></li>
                <li><a href="/blog/tag/webgui/">webgui</a></li>
                <li><a href="/blog/tag/webundesign/">webundesign</a></li>
                <li><a href="/blog/tag/xs/">xs</a></li>
                <li><a href="/blog/tag/yertl/">yertl</a></li>
            </ul>
        </nav>
    </div>

</div>

        </div>
        <footer>
            
            <div class="container tagline">
                <a href="http://preaction.me/statocles">Made with Statocles</a><br>
                <a href="http://www.perl.org">Powered by Perl</a>
            </div>
        </footer>
    </body>
</html>
