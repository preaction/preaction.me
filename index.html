<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="/theme/css/normalize.css" rel="stylesheet">
        <link href="/theme/css/skeleton.css" rel="stylesheet">
        <link href="/theme/css/statocles-default.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <title>preaction</title>
        <meta content="Statocles 0.083" name="generator">
        <link href="/blog/index.atom" rel="alternate" type="application/atom+xml">
        <link href="/blog/index.rss" rel="alternate" type="application/rss+xml">
        
        <link href="/theme/plugin/highlight/solarized-light.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <header>
            <nav class="navbar">
                <div class="container">
                    <a class="brand" href="/">preaction</a>
                    <ul>
                        <li>
                            <a href="/index.html">Blog</a>
                        </li>
                        <li>
                            <a href="/resume">Resume</a>
                        </li>
                        <li>
                            <a href="/talks">Talks</a>
                        </li>
                        <li>
                            <a href="/statocles">Statocles</a>
                        </li>
                        <li>
                            <a href="/yertl">Yertl</a>
                        </li>
                        <li>
                            <a href="http://indiepalate.com">Food</a>
                        </li>
                    </ul>
                    
                </div>
            </nav>
            
        </header>
        <div class="main container">
            
<div class="row">

    <div class="nine columns">
        <main>


            <article>
                <header>
                    <h1><a href="/blog/2017/07/04/cpan-testers-has-an-api/">CPAN Testers Has an API</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/web/" rel="tag">web</a>
                        <a href="/blog/tag/cpantesters/" rel="tag">cpantesters</a>
                    </p>

                    <aside>
                        <p><time datetime="2017-07-04">
                            Posted on 2017-07-04
                        </time>
                        <a data-disqus-identifier="/2017/07/04/cpan-testers-has-an-api/index.markdown" href="/blog/2017/07/04/cpan-testers-has-an-api/#disqus_thread">0 comments</a>
                        </p>
                    </aside>

                </header>

                <p>[<a href="https://www.youtube.com/watch?v=okeBgBb1Cxs&amp;index=60&amp;list=PLA9_Hq3zhoFxdSVDA4v9Af3iutQxLI14m">Watch this lightning talk on The Perl Conference YouTube
channel</a>]</p>

<p>I&#39;ve been working on the <a href="http://www.cpantesters.org">CPAN Testers</a>
project since 2015. In all that time, I&#39;ve been focused on maintenance
(which has involved more operations/administration tasks than any actual
code changes) and modernization. It&#39;s that modernization effort that has
led to a <a href="http://api.cpantesters.org">new CPAN Testers API</a>.</p>

<p>This new API uses <a href="http://mojolicious.org">the Mojolicious web
framework</a>, along with an
<a href="http://openapis.org">OpenAPI</a> schema to expose all of the most useful
CPAN Testers data. OpenAPI is a specification for web APIs, and there
are tools like <a href="http://swagger.io">Swagger</a> to generate a useful documentation
website from your spec, like the <a href="http://api.cpantesters.org/docs/?url=/v3">CPAN Testers API documentation
website</a>.</p>


                    <p><a href="/blog/2017/07/04/cpan-testers-has-an-api/#section-2">Continue reading CPAN Testers Has an API...</a></p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2017/05/20/2017-perl-toolchain-summit/">2017 Perl Toolchain Summit</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/perl/" rel="tag">perl</a>
                        <a href="/blog/tag/cpantesters/" rel="tag">cpantesters</a>
                    </p>

                    <aside>
                        <p><time datetime="2017-05-20">
                            Posted on 2017-05-20
                        </time>
                        <a data-disqus-identifier="/2017/05/20/2017-perl-toolchain-summit/index.markdown" href="/blog/2017/05/20/2017-perl-toolchain-summit/#disqus_thread">0 comments</a>
                        </p>
                    </aside>

                </header>

                <p>This year I had one goal for <a href="http://cpantesters.org">CPAN Testers</a>:
Replace the current <a href="http://metabase.cpantesters.org">Metabase API</a> with
a new API that did not write to Amazon SimpleDB. The current
high-availability database that raw incoming test reports are written is
Amazon SimpleDB behind an API called Metabase.
<a href="http://metacpan.org/pod/Metabase">Metabase</a> is a highly-flexible data
storage API designed to work with massive, unstructured data sets and
still allow for sane organization and storage of data. Unfortunately,
Amazon SimpleDB is as it says on the tin: Simple. Worse, it&#39;s expensive:
Like most Amazon services, it charges for usage, so there&#39;s a huge
incentive for CPAN Testers to use it as little as possible (which made
some of the code quite obtuse).</p>

<p>So, I made a plan to excise the Metabase. Since we already cached every
raw test report locally in the CPAN Testers MySQL database, I planned to
write a new Metabase API that wrote directly to the cache, and then
adjust the backend processing to read from the cache. I spent the better
part of a month working through all the Metabase APIs, how the data was
stored in the database, and how to translate between a simple JSON
format and the serialized Metabase objects. However, some proper schema
design prevented me from finishing this project: A single <code>NOT NULL</code>
column could not be changed to allow nulls very easily, it being a 600GB
table. The one time where a well-designed schema was a bad thing!</p>

<p>But then <a href="https://github.com/garu">Garu</a>, author of
<a href="https://metacpan.org/pod/cpanm-reporter">cpanm-reporter</a> and
<a href="https://metacpan.org/pod/CPAN::Testers::Common::Client">CPAN::Testers::Common::Client</a>
came up with an idea to make a new test report format. These new reports
would have to be stored in a new place, and I discovered that <a href="https://dev.mysql.com/doc/refman/5.7/en/json.html">MySQL had
recently started building some rich JSON
tooling</a>. Making
a new JSON test report format and storing it in our new
high-availability MySQL cluster seemed like a perfect solution for
storing our raw test reports.</p>

<p>After a few weeks of discussion, I finally realized that it would be an
easier task to make a backwards-compatible Metabase API write to the new
test report MySQL table, even though it increased the amount of work
that needed to be done:</p>

<ul>
<li>Complete the new test report format schema (Garu)</li>
<li>Write the new backwards-compatibility Metabase API (Me)</li>
<li>Write a new test report processor that writes to the old Metabase
cache tables (Joel Berger)</li>
<li>Write a migration script from the old Metabase cache tables to the new
test report JSON object (?)</li>
</ul>

<p>With that plan, I headed for Lyon.</p>


                    <p><a href="/blog/2017/05/20/2017-perl-toolchain-summit/#section-2">Continue reading 2017 Perl Toolchain Summit...</a></p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2017/04/23/nerds-rejecting-nerds/">Nerds Rejecting Nerds</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/community/" rel="tag">community</a>
                        <a href="/blog/tag/feminism/" rel="tag">feminism</a>
                    </p>

                    <aside>
                        <p><time datetime="2017-04-23">
                            Posted on 2017-04-23
                        </time>
                        <a data-disqus-identifier="/2017/04/23/nerds-rejecting-nerds/index.markdown" href="/blog/2017/04/23/nerds-rejecting-nerds/#disqus_thread">0 comments</a>
                        </p>
                    </aside>

                </header>

                <p><a href="https://medium.com/@maradydd/when-nerds-collide-31895b01e68c">https://medium.com/@maradydd/when-nerds-collide-31895b01e68c</a></p>

<p>I was linked to this article after a discussion that was triggered by
a Tweet: <a href="https://twitter.com/shadowcat_mst/status/852265380156510214">https://twitter.com/shadowcat_mst/status/852265380156510214</a></p>

<p>In this article, the author describes a group called &quot;weird nerds&quot;,
later renamed &quot;hackers&quot;, and goes through some of the reasons why this
group is rejecting new members of their community (namely &quot;brogrammers&quot;
and &quot;geek feminists&quot;, a false equivalence if ever there was one).</p>

<p>As someone who fits the author&#39;s idea of a hacker (the classical
definition of hacker, not someone who breaks into computers), and yet
has never felt like part of the hacker community, there are a lot of
things in here that are bad, but I&#39;ll comment for now on a couple
quotes:</p>


                    <p><a href="/blog/2017/04/23/nerds-rejecting-nerds/#section-2">Continue reading Nerds Rejecting Nerds...</a></p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2017/04/14/timeout-for-parallel-forkmanager/">Timeout for Parallel::ForkManager</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/perl/" rel="tag">perl</a>
                        <a href="/blog/tag/code/" rel="tag">code</a>
                    </p>

                    <aside>
                        <p><time datetime="2017-04-14">
                            Posted on 2017-04-14
                        </time>
                        <a data-disqus-identifier="/2017/04/14/timeout-for-parallel-forkmanager/index.markdown" href="/blog/2017/04/14/timeout-for-parallel-forkmanager/#disqus_thread">0 comments</a>
                        </p>
                    </aside>

                </header>

                <p>At <a href="https://www.meetup.com/ChicagoPM/events/239053113/">tonight&#39;s Chicago Perl Mongers Office
Hours</a>, Ray came up
with an interesting problem. While testing all of CPAN for <a href="http://www.cpantesters.org">CPAN
Testers</a>, how do you detect when a test is
hanging and kill it before it takes down the entire machine? How do you
simply kill a test that is taking too long? And how do you do it without
having a wholly separate watchdog program?</p>

<p>Ray&#39;s using
<a href="http://metacpan.org/pod/Parallel::ForkManager">Parallel::ForkManager</a>
to execute testing jobs in parallel across multiple Perl installs. There
are a few ways we could implement timeouts, including
<a href="http://metacpan.org/pod/IPC::Run">IPC::Run</a>&#39;s <code>timeout</code> function, or
the <a href="http://perldoc.perl.org/functions/alarm.html"><code>alarm</code></a> Perl
built-in, but these must all be implemented in the child process. It&#39;d
be nicer if we could use the parent process to watch its own children.</p>


                    <p><a href="/blog/2017/04/14/timeout-for-parallel-forkmanager/#section-2">Continue reading Timeout for Parallel::ForkManager...</a></p>

            </article>
            <article>
                <header>
                    <h1><a href="/blog/2017/03/27/choosing-a-log-level/">Choosing a Log Level</a></h1>

                    <p class="tags">Tags:
                        <a href="/blog/tag/logging/" rel="tag">logging</a>
                    </p>

                    <aside>
                        <p><time datetime="2017-03-27">
                            Posted on 2017-03-27
                        </time>
                        <a data-disqus-identifier="/2017/03/27/choosing-a-log-level/index.markdown" href="/blog/2017/03/27/choosing-a-log-level/#disqus_thread">0 comments</a>
                        </p>
                    </aside>

                </header>

                <p>Like all subjective decisions in technology, which log level to use is
the cause of much angry debate. Worse, different logging systems use
different levels: <a href="https://en.wikipedia.org/wiki/Log4j#Log4j_log_levels">Log4j has 6 severity
levels</a>, and
<a href="https://en.wikipedia.org/wiki/Syslog#Severity_level">Syslog has 8 severity
levels</a>. While both
lists of log levels come with guidance as to which level to use when,
there&#39;s still enough ambiguity to cause confusion.</p>

<p>When choosing a log level, it&#39;s important to know how visible you want
the message to be, how big of a problem it is, and what you want the
user to do about it. With that in mind, this is the decision tree
I follow when choosing a log level:</p>


                    <p><a href="/blog/2017/03/27/choosing-a-log-level/#section-2">Continue reading Choosing a Log Level...</a></p>

            </article>
        </main>

        <ul class="pager">
            <li class="prev">
                <a class="button button-primary" href="/blog/page/2" rel="next">
                    ← Older
                </a>
            </li>
            <li class="next">
                <a class="button disabled" href="/blog/" rel="prev">
                    Newer →
                </a>
            </li>
        </ul>

    </div>

    <div class="three columns sidebar">
        
<img alt="avatar" src="/images/avatar-small.jpg" title="Do You Believe In Magic? by Fusspot">

<h1>Doug Bell</h1>

<ul class="bare">
    <li><a href="https://github.com/preaction">
        <i class="fa fa-github-alt"></i> Github: preaction
    </a></li>
    <li><a href="https://twitter.com/preaction">
        <i class="fa fa-twitter"></i>Twitter: preaction
    </a></li>
    <li><a href="https://metacpan.org/author/PREACTION">CPAN: preaction</a></li>
</ul>

        <h1>Tags</h1>
        <ul class="list-inline">
            <li><a href="/blog/tag/beam/">beam</a></li>
            <li><a href="/blog/tag/blacklivesmatter/">blacklivesmatter</a></li>
            <li><a href="/blog/tag/chicago-pm/">chicago.pm</a></li>
            <li><a href="/blog/tag/code/">code</a></li>
            <li><a href="/blog/tag/community/">community</a></li>
            <li><a href="/blog/tag/cpan/">cpan</a></li>
            <li><a href="/blog/tag/cpantesters/">cpantesters</a></li>
            <li><a href="/blog/tag/error/">error</a></li>
            <li><a href="/blog/tag/etl/">etl</a></li>
            <li><a href="/blog/tag/feminism/">feminism</a></li>
            <li><a href="/blog/tag/funny/">funny</a></li>
            <li><a href="/blog/tag/git/">git</a></li>
            <li><a href="/blog/tag/history/">history</a></li>
            <li><a href="/blog/tag/javascript/">javascript</a></li>
            <li><a href="/blog/tag/logging/">logging</a></li>
            <li><a href="/blog/tag/mojolicious/">mojolicious</a></li>
            <li><a href="/blog/tag/moose/">moose</a></li>
            <li><a href="/blog/tag/mysql/">mysql</a></li>
            <li><a href="/blog/tag/openbsd/">openbsd</a></li>
            <li><a href="/blog/tag/perl/">perl</a></li>
            <li><a href="/blog/tag/personal/">personal</a></li>
            <li><a href="/blog/tag/progress/">progress</a></li>
            <li><a href="/blog/tag/racism/">racism</a></li>
            <li><a href="/blog/tag/rants/">rants</a></li>
            <li><a href="/blog/tag/scripts/">scripts</a></li>
            <li><a href="/blog/tag/software/">software</a></li>
            <li><a href="/blog/tag/sql/">sql</a></li>
            <li><a href="/blog/tag/statocles/">statocles</a></li>
            <li><a href="/blog/tag/travel/">travel</a></li>
            <li><a href="/blog/tag/web/">web</a></li>
            <li><a href="/blog/tag/webgui/">webgui</a></li>
            <li><a href="/blog/tag/webundesign/">webundesign</a></li>
            <li><a href="/blog/tag/xs/">xs</a></li>
            <li><a href="/blog/tag/yertl/">yertl</a></li>
        </ul>
        <h1>Feeds</h1>
        <ul class="list-inline">
            <li>
                <a href="/blog/index.atom" rel="alternate" type="application/atom+xml">
                    Atom
                </a>
            </li>
            <li>
                <a href="/blog/index.rss" rel="alternate" type="application/rss+xml">
                    RSS
                </a>
            </li>
        </ul>
    </div>

</div>

<script type="text/javascript">
    var disqus_shortname = 'preaction';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

        </div>
        <footer>
            
            <div class="container tagline">
                <a href="http://preaction.me/statocles">Made with Statocles</a><br>
                <a href="http://www.perl.org">Powered by Perl</a>
            </div>
        </footer>
    </body>
</html>
